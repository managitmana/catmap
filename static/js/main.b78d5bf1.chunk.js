(this["webpackJsonpgeolonia-pwa"]=this["webpackJsonpgeolonia-pwa"]||[]).push([[0],{103:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(29),i=n.n(r),s=n(16),o=n(47),l=n(7),j=n(59),d=n(48),u=n.n(d),h=n(6),b=(n(75),n(60)),p=n.n(b),f=function(e){var t={type:"FeatureCollection",features:[]};for(var n in e){var c=e[n];if(!c["\u7d4c\u5ea6"]||!c["\u7def\u5ea6"]||!c["\u30b9\u30dd\u30c3\u30c8\u540d"])return;for(var a={type:"Feature",geometry:{type:"Point",coordinates:[Number(c["\u7d4c\u5ea6"]),Number(c["\u7def\u5ea6"])]},properties:{_id:n}},r=0;r<Object.keys(c).length;r++){var i=Object.keys(c)[r];a.properties[i]=c[i]}t.features.push(a)}return t},x=function(e){e.addLayer({id:"clusters",type:"circle",source:"shops",filter:["has","point_count"],paint:{"circle-radius":20,"circle-color":"#FF0000","circle-opacity":1}}),e.addLayer({id:"cluster-count",type:"symbol",source:"shops",filter:["has","point_count"],paint:{"text-color":"#FFFFFF"},layout:{"text-field":"{point_count_abbreviated} \u4ef6","text-size":12,"text-font":["Noto Sans Regular"]}}),e.on("click","clusters",(function(t){var n=e.queryRenderedFeatures(t.point,{layers:["clusters"]}),c=n[0].properties.cluster_id;e.getSource("shops").getClusterExpansionZoom(c,(function(t,c){t||e.easeTo({center:n[0].geometry.coordinates,zoom:c})}))})),e.on("mouseenter","clusters",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","clusters",(function(){e.getCanvas().style.cursor=""}))},O=n(21),m=(n(82),n(2)),g=function(e){e.stopPropagation()},v=function(e){return Object(m.jsxs)("div",{className:"links",children:[e.data.Instagram?Object(m.jsx)("div",{className:"link",children:Object(m.jsx)("a",{href:"https://instagram.com/".concat(e.data.Instagram),children:Object(m.jsx)(O.c,{onClick:g,size:"20px"})})}):"",e.data.Twitter?Object(m.jsx)("div",{className:"link",children:Object(m.jsx)("a",{href:"https://twitter.com/".concat(e.data.Twitter),children:Object(m.jsx)(O.f,{onClick:g,size:"20px"})})}):""]})},y=(n(84),n(36)),w=function(e){var t=a.a.useRef(null),n=a.a.useState(null),c=Object(l.a)(n,2),r=c[0],i=c[1],o=e.shop,j=function(){e.close(),t.current&&(t.current.remove(),r.remove())};a.a.useEffect((function(){if(t.current){var e=new window.geolonia.Map({container:t.current,interactive:!1,zoom:14,style:"geolonia/gsi"});i(e)}}),[o,t]);var d,u=function(e){var t="";return"number"!==typeof e||Number.isNaN(e)||(t=e>1e3?Math.round(e/1e3)+" km":Math.round(e)+" m"),t}(o.distance),h=o["\u30ab\u30c6\u30b4\u30ea"],b=o["\u7d39\u4ecb\u6587"];return Object(m.jsxs)("div",{className:"shop-single",children:[Object(m.jsx)("div",{className:"head",children:Object(m.jsxs)("button",{onClick:j,children:[Object(m.jsx)(y.b,{size:"16px",color:"#FFFFFF"})," \u9589\u3058\u308b"]})}),Object(m.jsx)("div",{className:"container",children:o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h1",{className:"",children:["\u30bf\u30a4\u30c8\u30eb\uff1a",o["\u30b9\u30dd\u30c3\u30c8\u540d"]]}),Object(m.jsxs)("p",{children:["\u7ba1\u7406\u756a\u53f7\uff1a",o["\u516c\u5f0f\u30b5\u30a4\u30c8"]]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"nowrap",children:Object(m.jsx)(s.b,{to:"/list?category=".concat(h),children:Object(m.jsx)("span",{onClick:j,className:"category",children:h})})}),Object(m.jsx)("span",{className:"nowrap",children:u&&Object(m.jsxs)("span",{className:"distance",children:["\u73fe\u5728\u4f4d\u7f6e\u304b\u3089 ",u]})})]}),Object(m.jsxs)("div",{children:[" ",Object(m.jsx)("h2",{children:"\u9023\u7d61\u5148"}),Object(m.jsx)("p",{children:o["\u9023\u7d61\u5148"]})]}),Object(m.jsx)("div",{style:{margin:"24px 0"},children:Object(m.jsx)(v,{data:o})}),o["\u753b\u50cf"]&&Object(m.jsx)("img",{src:o["\u753b\u50cf"],alt:o["\u30b9\u30dd\u30c3\u30c8\u540d"],style:{width:"100%"}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"\u5185\u5bb9"}),Object(m.jsx)("p",{style:{margin:"24px 0"},children:(d=b,d.split(/(\r\n)|(\n)|(\r)/g).map((function(e,t){var n="";return"\r\n"===e||"\n"===e||"\r"===e?n=Object(m.jsx)("br",{},t):void 0!==e&&(n=e),n})))})]}),Object(m.jsx)("div",{ref:t,style:{width:"100%",height:"200px",marginTop:"24px"},"data-lat":o["\u7def\u5ea6"],"data-lng":o["\u7d4c\u5ea6"],"data-navigation-control":"off"}),Object(m.jsx)("p",{children:Object(m.jsx)("a",{className:"small",href:"http://maps.apple.com/?q=".concat(o["\u7def\u5ea6"],",").concat(o["\u7d4c\u5ea6"]),children:"\u30b9\u30dd\u30c3\u30c8\u307e\u3067\u306e\u9053\u9806"})})]}):Object(m.jsx)(m.Fragment,{})})]})},N={width:"100%",height:"100%",position:"relative"},F=function(e){for(var t=["poi","poi-primary","poi-r0-r9","poi-r10-r24","poi-r25","poi-bus","poi-entrance"],n=0;n<t.length;n++){var c=t[n];e.setLayoutProperty(c,"visibility","none")}},k=function(e){var t=(e||window.location).hash.substring(2);return new URLSearchParams(t)},S=function(e){var t=a.a.useRef(null),n=a.a.useState(),c=Object(l.a)(n,2),r=c[0],i=c[1],s=a.a.useState(void 0),o=Object(l.a)(s,2),j=o[0],d=o[1],u=a.a.useState(""),h=Object(l.a)(u,2),b=h[0],O=h[1];a.a.useEffect((function(){!function(e,t){e&&t&&e.on("render",(function(){if(!e.getSource("shops")){F(e);var n=f(t);e.addSource("shops",{type:"geojson",data:n,cluster:!0,clusterMaxZoom:14,clusterRadius:25}),e.addLayer({id:"shop-points",type:"circle",source:"shops",filter:["all",["==","$type","Point"]],paint:{"circle-radius":13,"circle-color":"#FF0000","circle-opacity":.4,"circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-stroke-opacity":1}}),e.addLayer({id:"shop-symbol",type:"symbol",source:"shops",filter:["all",["==","$type","Point"]],paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":2},layout:{"text-field":"{\u30b9\u30dd\u30c3\u30c8\u540d}","text-font":["Noto Sans Regular"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto","text-size":12,"text-anchor":"top","text-max-width":12,"text-allow-overlap":!1}}),e.on("mouseenter","shop-points",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","shop-points",(function(){e.getCanvas().style.cursor=""})),e.on("mouseenter","shop-symbol",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","shop-symbol",(function(){e.getCanvas().style.cursor=""})),e.on("click","shop-points",(function(e){e.features[0].properties.cluster||d(e.features[0].properties)})),e.on("click","shop-symbol",(function(e){e.features[0].properties.cluster||d(e.features[0].properties)})),x(e)}}))}(r,e.data)}),[r,e.data]),a.a.useEffect((function(){var e,t=k();b&&t.set("map",b),(e=t).toString()&&(window.location.hash="#/?".concat(e.toString().replace(/%2F/g,"/")))}),[b]),a.a.useEffect((function(){if(t.current&&!r){var n=window.geolonia,c=f(e.data),a=p()(c),s=new n.Map({container:t.current,style:"geolonia/gsi",bounds:a,fitBoundsOptions:{padding:50}}),o=k();if(o&&o.get("map")){var l=(o.get("map")||"").split("/"),j=l[0],d=l[1],u=l[2];s.flyTo({center:[u,d],zoom:j})}else a&&s.fitBounds(a,{padding:50});var h=function(){F(s),i(s),s.on("moveend",(function(){var e=s.getCenter(),t=s.getZoom(),n=Math.round(100*t)/100,c=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,c),r=Math.round(e.lng*a)/a,i=Math.round(e.lat*a)/a,o=Math.ceil(n);O("".concat(o,"/").concat(i,"/").concat(r))}))},b=function(){s.resize()};return s.on("load",h),window.addEventListener("orientationchange",b),function(){window.removeEventListener("orientationchange",b),s.off("load",h)}}}),[t,r,e.data]);return Object(m.jsxs)("div",{style:N,children:[Object(m.jsx)("div",{ref:t,style:N,"data-geolocate-control":"on","data-marker":"off","data-gesture-handling":"off"}),j?Object(m.jsx)(w,{shop:j,close:function(){d(void 0)}}):Object(m.jsx)(m.Fragment,{})]})},C=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(S,{data:e.data})})},M=(n(85),function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"\u6295\u7a3f\u52df\u96c6\u4e2d"}),Object(m.jsx)("p",{children:"\u597d\u304d\u306a\u753b\u50cf\u3084\u307f\u3093\u306a\u306b\u304a\u77e5\u3089\u305b\u3057\u305f\u3044\u60c5\u5831\u3092\u306b\u3083\u3093\u3067\u3082\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(m.jsx)("div",{className:"btn-radius-gradient-wrap",children:Object(m.jsx)("a",{href:"https://forms.gle/i8J6xN8cu3TZhgik8",className:"btn btn-radius-gradient",children:"\u6295\u7a3f\u3059\u308b\uff01"})}),Object(m.jsx)("p",{children:"\u4fee\u6b63\u306f\u3053\u3061\u3089"}),Object(m.jsx)("div",{className:"btn-radius-gradient-wrap",children:Object(m.jsx)("a",{href:"https://forms.gle/i8J6xN8cu3TZhgik8",className:"btn btn-radius-gradient",children:"\u4fee\u6b63\u3059\u308b\uff01"})}),Object(m.jsx)("img",{src:"https://managitmana.github.io/catmap/posttop.jpg",alt:"\u6295\u7a3f\u304a\u9858\u3044\u753b\u50cf"})]})}),E=(n(86),function(){return Object(m.jsx)("div",{className:"about-us",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"branding",children:[Object(m.jsx)("h1",{children:"\u306b\u3083\u3063\u3077\u306b\u3064\u3044\u3066"}),Object(m.jsx)("p",{children:"\u306b\u3083\u3063\u3077\u306f\u732b\u306b\u3064\u3044\u3066\u306b\u3083\u3093\u3067\u3082\u6295\u7a3f\u3067\u304d\u308b\u30de\u30c3\u30d4\u30f3\u30b0\u30a2\u30d7\u30ea\u3067\u3059"}),Object(m.jsx)("p",{children:"\u53ef\u611b\u3044\u732b\u306e\u5199\u771f\u3084\u732b\u306e\u3044\u308b\u98a8\u666f\u3092\u81ea\u7531\u306b\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(m.jsx)("p",{children:"\u91cc\u89aa\u52df\u96c6\u3084\u6368\u3066\u732b\u306e\u60c5\u5831\u3082\u6295\u7a3f\u3067\u304d\u307e\u3059"})]})})})}),_=n(66),z=(n(87),function(e){var t=Object(h.f)(),n=a.a.useState([]),c=Object(l.a)(n,2),r=c[0],i=c[1];return a.a.useEffect((function(){for(var t=[],n=0;n<e.data.length;n++){var c=e.data[n];-1===t.indexOf(c["\u30ab\u30c6\u30b4\u30ea"])&&t.push(c["\u30ab\u30c6\u30b4\u30ea"])}i(t)}),[e.data]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"head"}),Object(m.jsx)("div",{className:"category",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"category-item",children:[Object(m.jsx)("label",{htmlFor:"category-select",children:"\u30ab\u30c6\u30b4\u30ea\u304b\u3089\u9078\u3076"}),Object(m.jsx)(_.a,{onChange:function(e){e&&t("/list?category=".concat(e.value))},options:r.map((function(e){return{value:e,label:e}}))})]})})})]})}),L=n(150),T=n(152),P=(n(103),function(e){var t=e.data,n=Object(c.useState)([]),a=Object(l.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(),o=Object(l.a)(s,2),j=o[0],d=o[1];return Object(c.useEffect)((function(){for(var e=[],n=function(n){var c=t[n];c["\u753b\u50cf"]&&e.push(Object(m.jsx)(L.a,{className:"mui-image-list-item",children:Object(m.jsx)("img",{src:c["\u753b\u50cf"],alt:c["\u30b9\u30dd\u30c3\u30c8\u540d"],loading:"lazy",onClick:function(){return function(e){e&&d(e)}(c)},onError:function(e){e.target.parentNode.remove()}})},n))},c=0;c<t.length;c++)n(c);i(e)}),[t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"head"}),Object(m.jsx)("div",{className:"images",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(T.a,{id:"mui-image-list",sx:{width:"100%",height:"100%"},cols:2,rowHeight:164,children:r}),j?Object(m.jsx)(w,{shop:j,close:function(){d(void 0)}}):Object(m.jsx)(m.Fragment,{})]})})]})}),R=(n(106),function(){return Object(m.jsx)("div",{className:"tabbar",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsxs)(s.b,{to:"/",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(O.b,{})}),Object(m.jsx)("div",{className:"text",children:"\u30db\u30fc\u30e0"})]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(s.b,{to:"/category",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(O.e,{})}),Object(m.jsx)("div",{className:"text",children:"\u30ab\u30c6\u30b4\u30ea"})]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(s.b,{to:"/list",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(O.d,{})}),Object(m.jsx)("div",{className:"text",children:"\u6295\u7a3f"})]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(s.b,{to:"/images",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(O.a,{})}),Object(m.jsx)("div",{className:"text",children:"\u5199\u771f\u304b\u3089\u63a2\u3059"})]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(s.b,{to:"/about",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(y.a,{})}),Object(m.jsx)("div",{className:"text",children:"\u30de\u30c3\u30d7\u306b\u3064\u3044\u3066"})]})})]})})}),W=function(e){return e.replace(/[\uff01-\uff5e]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})).replace(/\u3000/g," ")},$=function(e){var t=e[0];return e.slice(1).map((function(e){return t.reduce((function(n,c){var a=e[t.indexOf(c)];return n[c]=W(a||""),n}),{})}))},J=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.sort((function(e,t){return Date.parse(t["\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7"])-Date.parse(e["\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7"])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=a.a.useState([]),t=Object(l.a)(e,2),n=t[0],c=t[1];return a.a.useEffect((function(){fetch("".concat(".","/data.json?timestamp=").concat((new Date).getTime())).then((function(e){return e.ok?e.text():Promise.reject(e.status)})).then((function(e){var t=JSON.parse(e);if("values"in t===!1)return console.log("No Data Found at Spreadsheet"),void c([]);for(var n=$(t.values),a=[],r=0;r<n.length;r++){var i=n[r];if(i["\u7def\u5ea6"]&&i["\u7d4c\u5ea6"]&&i["\u30b9\u30dd\u30c3\u30c8\u540d"]&&(i["\u7def\u5ea6"].match(/^-?[0-9]+(\.[0-9]+)?$/)&&i["\u7d4c\u5ea6"].match(/^-?[0-9]+(\.[0-9]+)?$/))){var s=Object(o.a)(Object(o.a)({},i),{},{index:r});a.push(s)}}J(a).then((function(e){c(e)}))}))}),[]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)("div",{className:"app-body",children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/",element:Object(m.jsx)(C,{data:n})}),Object(m.jsx)(h.a,{path:"/list",element:Object(m.jsx)(M,{})}),Object(m.jsx)(h.a,{path:"/category",element:Object(m.jsx)(z,{data:n})}),Object(m.jsx)(h.a,{path:"/images",element:Object(m.jsx)(P,{data:n})}),Object(m.jsx)(h.a,{path:"/about",element:Object(m.jsx)(E,{})})]})}),Object(m.jsx)("div",{className:"app-footer",children:Object(m.jsx)(R,{})})]})},A=(n(107),n(64));var B=function(e){var t=e.url,n=Object(A.a)().Canvas;return Object(m.jsx)(n,{text:t,options:{type:"image/png",margin:0,width:128}})},D=n(144),U=n(146),q=n(148),I=n(145),H=n(147),G=n(149),K=n(22),Q=(n(130),function(){var e=window.location.href.replace(/\?.+$/,"").replace(/#.+$/,"");return Object(m.jsx)("div",{className:"share",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"/",children:Object(m.jsx)(D.a,{url:e,hashtags:["".concat(K.title)],title:"".concat(K.title),children:Object(m.jsx)(I.a,{size:32,round:!0})})})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"/",children:Object(m.jsx)(U.a,{url:e,hashtag:"#".concat(K.title),children:Object(m.jsx)(H.a,{size:32,round:!0})})})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"/",children:Object(m.jsx)(q.a,{url:e,title:"".concat(K.title),children:Object(m.jsx)(G.a,{size:32,round:!0})})})})]})})}),V=function(){var e=K.logo_image_url||"".concat(".","/logo.svg");return Object(m.jsxs)("div",{className:"about",children:[Object(m.jsx)("div",{className:"branding",children:Object(m.jsx)("img",{className:"image",src:e,alt:""})}),Object(m.jsx)("div",{className:"description",children:K.description}),Object(m.jsx)("div",{className:"qrcode",children:Object(m.jsx)(B,{url:window.location.href})}),Object(m.jsx)(Q,{})]})};n(131);var X=function(){return Object(m.jsx)("div",{className:"outer-container",children:Object(m.jsxs)("div",{className:"inner-container",children:[Object(m.jsx)(V,{}),Object(m.jsx)(Z,{})]})})},Y=(n(132),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(s.a,{children:Object(m.jsx)(X,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ee(t,e)}))}}()},22:function(e){e.exports=JSON.parse('{"title":"\u306b\u3083\u3063\u3077","description":"\u306b\u3083\u3063\u3077\u306f\u306d\u3053\u3061\u3083\u3093\u306e\u60c5\u5831\u3092\u306a\u3093\u3067\u3082\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u53ef\u611b\u3044\u5199\u771f\u304b\u3089\u91cc\u89aa\u306e\u52df\u96c6\u3001\u8ff7\u3044\u732b\u306e\u60c5\u5831\u306a\u3069\u306b\u3083\u3093\u3067\u3082\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3044\u3002","form_url":"","logo_image_url":"https://managitmana.github.io/catmap/icon.jpg","background_image_url":"https://managitmana.github.io/catmap/background.jpg","primary_color":"#36e4f7","orderby":"distance"}')},75:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.b78d5bf1.chunk.js.map